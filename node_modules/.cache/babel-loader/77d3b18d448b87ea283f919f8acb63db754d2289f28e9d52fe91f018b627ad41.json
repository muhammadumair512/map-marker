{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\CREATIVE_SOLUTIONS\\\\Desktop\\\\bolt\\\\bolt codesandbox\\\\src\\\\App.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$(),\n  _s3 = $RefreshSig$();\nimport React, { useState, useRef, useEffect } from \"react\";\nimport { MapContainer, TileLayer, Marker, Tooltip, useMap } from \"react-leaflet\";\nimport \"leaflet/dist/leaflet.css\";\nimport Papa from \"papaparse\";\nimport L from \"leaflet\";\nimport \"leaflet-draw/dist/leaflet.draw.css\";\nimport \"leaflet-draw\";\nimport booleanPointInPolygon from \"@turf/boolean-point-in-polygon\";\nimport { point, polygon } from \"@turf/helpers\";\nimport * as XLSX from \"xlsx\";\n\n// Custom icons\nimport CustomMarkerIconImage from \"./custom-marker.png\";\nimport DotIconImage from \"./small-dot.png\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst CustomMarkerIcon = L.icon({\n  iconUrl: CustomMarkerIconImage,\n  iconSize: [30, 40],\n  iconAnchor: [15, 40],\n  popupAnchor: [0, -40]\n});\nconst DotIcon = L.icon({\n  iconUrl: DotIconImage,\n  iconSize: [10, 10],\n  iconAnchor: [5, 5]\n});\nfunction ZipOverlay() {\n  _s();\n  const map = useMap();\n  useEffect(() => {\n    const url = \"https://raw.githubusercontent.com/OpenDataDE/State-zip-code-GeoJSON/master/pa_pennsylvania_zip_codes_geo.min.json\";\n    fetch(url).then(res => res.json()).then(geoData => {\n      const layer = L.geoJSON(geoData, {\n        style: {\n          color: \"#ff7800\",\n          weight: 1,\n          fillColor: \"#ffeda0\",\n          fillOpacity: 0.4\n        },\n        onEachFeature: (feature, layerInstance) => {\n          const zip = feature.properties.ZCTA5CE10 || \"Unknown ZIP\";\n          layerInstance.bindPopup(\"ZIP Code: \".concat(zip));\n        }\n      });\n      layer.addTo(map);\n      // map.fitBounds(layer.getBounds()); // Optionally auto-zoom to polygons\n    }).catch(err => {\n      console.error(\"Error fetching ZIP code GeoJSON:\", err);\n    });\n  }, [map]);\n  return null;\n}\n_s(ZipOverlay, \"IoceErwr5KVGS9kN4RQ1bOkYMAg=\", false, function () {\n  return [useMap];\n});\n_c = ZipOverlay;\nfunction DrawHandler(_ref) {\n  _s2();\n  let {\n    pricingData,\n    setFilteredPricingData,\n    locations,\n    setFilteredLocations\n  } = _ref;\n  const map = useMap();\n  const [drawButton, setDrawButton] = useState(false);\n  // Helper function: is point inside the drawn shape?\n  const isPointInShape = (lat, lng, layer) => {\n    // Circle or circleMarker => distance check\n    if (layer instanceof L.Circle || layer instanceof L.CircleMarker) {\n      const center = layer.getLatLng(); // center latLng\n      const radius = layer.getRadius(); // circle radius in meters\n      // Use Leaflet's built-in distance method:\n      const distance = map.distance(center, L.latLng(lat, lng));\n      return distance <= radius;\n    } else {\n      // Polygon or rectangle => use Turf booleanPointInPolygon\n      const shapeGeoJSON = layer.toGeoJSON();\n      const polygonGeometry = polygon(shapeGeoJSON.geometry.coordinates);\n      const pt = point([lng, lat]);\n      return booleanPointInPolygon(pt, polygonGeometry);\n    }\n  };\n\n  // Whenever a shape is drawn, filter points that lie inside it.\n  const handleShapeDrawn = layer => {\n    // Filter pricing data\n    const filteredPricing = pricingData.filter(p => {\n      const [lat, lng] = p.coords;\n      return isPointInShape(lat, lng, layer);\n    });\n\n    // Filter main CSV (comps) data\n    const filteredComps = locations.filter(loc => {\n      const [lat, lng] = loc.coords;\n      return isPointInShape(lat, lng, layer);\n    });\n\n    // Combine them into one array if you want a single “filtered data” state:\n    const combinedData = [...filteredPricing.map(item => ({\n      type: \"pricing\",\n      apn: item.apn,\n      lotAcreage: item.lotAcreage,\n      latitude: item.coords[0],\n      longitude: item.coords[1]\n    })), ...filteredComps.map(item => ({\n      type: \"comps\",\n      price: item.details.PRICE,\n      acres: item.details.ACRES,\n      latitude: item.coords[0],\n      longitude: item.coords[1]\n    }))];\n    setFilteredPricingData(combinedData);\n\n    // If you want to store filtered comps separately:\n    // setFilteredLocations(filteredComps);\n  };\n  useEffect(() => {\n    const drawnItems = new L.FeatureGroup();\n    map.addLayer(drawnItems);\n\n    // Add control once\n    const drawControl = new L.Control.Draw({\n      draw: {\n        marker: false,\n        polyline: false,\n        circle: {\n          shapeOptions: {\n            color: \"#ff0000\"\n          },\n          showRadius: true\n        },\n        circlemarker: {\n          shapeOptions: {\n            color: \"#ff0000\"\n          }\n        },\n        polygon: {\n          shapeOptions: {\n            color: \"#0000ff\"\n          },\n          showArea: true\n        },\n        rectangle: {\n          shapeOptions: {\n            color: \"#00ff00\"\n          }\n        }\n      },\n      edit: {\n        featureGroup: drawnItems\n      }\n    });\n    map.addControl(drawControl);\n\n    // When a shape is created, handle it once.\n    map.on(\"draw:created\", e => {\n      const {\n        layer\n      } = e;\n      drawnItems.addLayer(layer);\n      handleShapeDrawn(layer);\n    });\n  }, [map, pricingData, locations]);\n  return null;\n}\n_s2(DrawHandler, \"i9xTYXovrvUIceeETgxnKSXsqd8=\", false, function () {\n  return [useMap];\n});\n_c2 = DrawHandler;\nfunction App() {\n  _s3();\n  const [locations, setLocations] = useState([]); // Main CSV\n  const [pricingData, setPricingData] = useState([]); // Pricing CSV (raw)\n  const [filteredPricingData, setFilteredPricingData] = useState([]); // Combined filtered\n  const [filteredLocations, setFilteredLocations] = useState([]); // (Optional) filtered comps\n\n  // Acreage filter inputs\n  const [minAcreage, setMinAcreage] = useState(\"\");\n  const [maxAcreage, setMaxAcreage] = useState(\"\");\n  const mapRef = useRef(null);\n\n  // Upload main CSV\n  const handleMainCSVUpload = event => {\n    const file = event.target.files[0];\n    if (!file) return;\n    Papa.parse(file, {\n      header: true,\n      skipEmptyLines: true,\n      complete: function (results) {\n        const parsedData = results.data.map(row => ({\n          coords: [parseFloat(row.LATITUDE), parseFloat(row.LONGITUDE)],\n          details: row\n        }));\n        setLocations(parsedData);\n      }\n    });\n  };\n\n  // Upload pricing CSV\n  const handlePricingCSVUpload = event => {\n    const file = event.target.files[0];\n    if (!file) return;\n    Papa.parse(file, {\n      header: true,\n      skipEmptyLines: true,\n      complete: function (results) {\n        const parsedData = results.data.filter(row => row[\"LATITUDE\"] && row[\"LONGITUDE\"] && row[\"APN - FORMATTED\"]).map(row => ({\n          apn: row[\"APN - FORMATTED\"],\n          coords: [parseFloat(row.LATITUDE), parseFloat(row.LONGITUDE)],\n          lotAcreage: row[\"LOT ACREAGE\"] ? parseFloat(row[\"LOT ACREAGE\"]) : null\n        }));\n        setPricingData(parsedData);\n        setFilteredPricingData(parsedData); // By default, show all\n      }\n    });\n  };\n\n  // Apply acreage filter only to pricing data\n  const applyAcreageFilter = () => {\n    const minVal = parseFloat(minAcreage);\n    const maxVal = parseFloat(maxAcreage);\n\n    // If either is not a number, show all\n    if (isNaN(minVal) || isNaN(maxVal)) {\n      setFilteredPricingData(pricingData);\n      return;\n    }\n\n    // Filter by acreage in pricingData\n    const filtered = pricingData.filter(pd => {\n      if (pd.lotAcreage == null) return false;\n      return pd.lotAcreage >= minVal && pd.lotAcreage <= maxVal;\n    });\n    setFilteredPricingData(filtered);\n  };\n\n  // Download & export to Excel\n  const downloadFilteredDataToExcel = () => {\n    if (filteredPricingData.length === 0) {\n      alert(\"No data points to download.\");\n      return;\n    }\n    const pricingDataTab = filteredPricingData.filter(item => item.type === \"pricing\").map(item => ({\n      APN: item.apn,\n      \"LOT ACREAGE\": item.lotAcreage,\n      Latitude: item.latitude,\n      Longitude: item.longitude\n    }));\n    const mainDataTab = filteredPricingData.filter(item => item.type === \"comps\").map(item => ({\n      Price: item.price,\n      Acres: item.acres,\n      Latitude: item.latitude,\n      Longitude: item.longitude\n    }));\n    const workbook = XLSX.utils.book_new();\n    const pricingSheet = XLSX.utils.json_to_sheet(pricingDataTab);\n    const mainSheet = XLSX.utils.json_to_sheet(mainDataTab);\n    XLSX.utils.book_append_sheet(workbook, pricingSheet, \"Pricing Data\");\n    XLSX.utils.book_append_sheet(workbook, mainSheet, \"Main Data\");\n    XLSX.writeFile(workbook, \"filtered_data.xlsx\");\n\n    // Example of removing downloaded points from map (optional):\n    const filteredCoords = new Set(filteredPricingData.map(item => [item.latitude, item.longitude].join(\",\")));\n    setLocations(prev => prev.filter(loc => !filteredCoords.has(loc.coords.join(\",\"))));\n    setPricingData(prev => prev.filter(pt => !filteredCoords.has(pt.coords.join(\",\"))));\n\n    // Clear the array so user sees no points after download\n    setFilteredPricingData([]);\n    alert(\"Filtered data downloaded and removed from the map.\");\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      height: \"100vh\",\n      width: \"100%\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        position: \"absolute\",\n        zIndex: 1000,\n        top: 10,\n        right: 10,\n        background: \"white\",\n        padding: \"10px\",\n        borderRadius: \"5px\",\n        boxShadow: \"0 2px 5px rgba(0,0,0,0.2)\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"label\", {\n          children: [\"Upload Main CSV:\", \" \", /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"file\",\n            accept: \".csv\",\n            onChange: handleMainCSVUpload,\n            style: {\n              display: \"block\",\n              marginBottom: \"10px\"\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 333,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 331,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 330,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"label\", {\n          children: [\"Upload Pricing CSV:\", \" \", /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"file\",\n            accept: \".csv\",\n            onChange: handlePricingCSVUpload,\n            style: {\n              display: \"block\",\n              marginBottom: \"10px\"\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 344,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 342,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 341,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginTop: \"10px\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Min Acreage:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 353,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"number\",\n          value: minAcreage,\n          onChange: e => setMinAcreage(e.target.value),\n          style: {\n            width: \"80px\",\n            marginLeft: \"5px\",\n            marginRight: \"10px\"\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 354,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Max Acreage:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 360,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"number\",\n          value: maxAcreage,\n          onChange: e => setMaxAcreage(e.target.value),\n          style: {\n            width: \"80px\",\n            marginLeft: \"5px\",\n            marginRight: \"10px\"\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 361,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: applyAcreageFilter,\n          children: \"Apply Filter\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 367,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 352,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: downloadFilteredDataToExcel,\n        style: {\n          marginTop: \"10px\",\n          padding: \"5px 10px\",\n          background: \"#007bff\",\n          color: \"white\",\n          border: \"none\",\n          borderRadius: \"3px\",\n          cursor: \"pointer\"\n        },\n        children: \"Download Filtered Data (Excel)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 370,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 318,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(MapContainer, {\n      center: [41.2033, -77.1945],\n      zoom: 7,\n      style: {\n        height: \"100%\",\n        width: \"100%\"\n      },\n      ref: mapRef,\n      children: [/*#__PURE__*/_jsxDEV(TileLayer, {\n        url: \"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\",\n        attribution: \"\\xA9 OpenStreetMap contributors\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 393,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ZipOverlay, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 399,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(DrawHandler, {\n        pricingData: pricingData,\n        locations: locations,\n        setFilteredPricingData: setFilteredPricingData,\n        setFilteredLocations: setFilteredLocations\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 402,\n        columnNumber: 9\n      }, this), locations.map((loc, index) => /*#__PURE__*/_jsxDEV(Marker, {\n        position: loc.coords,\n        icon: CustomMarkerIcon,\n        children: /*#__PURE__*/_jsxDEV(Tooltip, {\n          direction: \"top\",\n          offset: [0, -10],\n          permanent: true,\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              textAlign: \"left\"\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"PRICE:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 414,\n              columnNumber: 17\n            }, this), \" \", loc.details.PRICE, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 415,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"ACRES:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 416,\n              columnNumber: 17\n            }, this), \" \", loc.details.ACRES]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 413,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 412,\n          columnNumber: 13\n        }, this)\n      }, index, false, {\n        fileName: _jsxFileName,\n        lineNumber: 411,\n        columnNumber: 11\n      }, this)), filteredPricingData.filter(item => item.type === undefined || item.type === \"pricing\").map((point, index) => /*#__PURE__*/_jsxDEV(Marker, {\n        position: [point.latitude, point.longitude],\n        icon: DotIcon\n      }, index, false, {\n        fileName: _jsxFileName,\n        lineNumber: 426,\n        columnNumber: 13\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 387,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 316,\n    columnNumber: 5\n  }, this);\n}\n_s3(App, \"2Qytn5aAt7okDDrKcPIt2+il8uA=\");\n_c3 = App;\nexport default App;\nvar _c, _c2, _c3;\n$RefreshReg$(_c, \"ZipOverlay\");\n$RefreshReg$(_c2, \"DrawHandler\");\n$RefreshReg$(_c3, \"App\");","map":{"version":3,"names":["React","useState","useRef","useEffect","MapContainer","TileLayer","Marker","Tooltip","useMap","Papa","L","booleanPointInPolygon","point","polygon","XLSX","CustomMarkerIconImage","DotIconImage","jsxDEV","_jsxDEV","CustomMarkerIcon","icon","iconUrl","iconSize","iconAnchor","popupAnchor","DotIcon","ZipOverlay","_s","map","url","fetch","then","res","json","geoData","layer","geoJSON","style","color","weight","fillColor","fillOpacity","onEachFeature","feature","layerInstance","zip","properties","ZCTA5CE10","bindPopup","concat","addTo","catch","err","console","error","_c","DrawHandler","_ref","_s2","pricingData","setFilteredPricingData","locations","setFilteredLocations","drawButton","setDrawButton","isPointInShape","lat","lng","Circle","CircleMarker","center","getLatLng","radius","getRadius","distance","latLng","shapeGeoJSON","toGeoJSON","polygonGeometry","geometry","coordinates","pt","handleShapeDrawn","filteredPricing","filter","p","coords","filteredComps","loc","combinedData","item","type","apn","lotAcreage","latitude","longitude","price","details","PRICE","acres","ACRES","drawnItems","FeatureGroup","addLayer","drawControl","Control","Draw","draw","marker","polyline","circle","shapeOptions","showRadius","circlemarker","showArea","rectangle","edit","featureGroup","addControl","on","e","_c2","App","_s3","setLocations","setPricingData","filteredPricingData","filteredLocations","minAcreage","setMinAcreage","maxAcreage","setMaxAcreage","mapRef","handleMainCSVUpload","event","file","target","files","parse","header","skipEmptyLines","complete","results","parsedData","data","row","parseFloat","LATITUDE","LONGITUDE","handlePricingCSVUpload","applyAcreageFilter","minVal","maxVal","isNaN","filtered","pd","downloadFilteredDataToExcel","length","alert","pricingDataTab","APN","Latitude","Longitude","mainDataTab","Price","Acres","workbook","utils","book_new","pricingSheet","json_to_sheet","mainSheet","book_append_sheet","writeFile","filteredCoords","Set","join","prev","has","height","width","children","position","zIndex","top","right","background","padding","borderRadius","boxShadow","accept","onChange","display","marginBottom","fileName","_jsxFileName","lineNumber","columnNumber","marginTop","value","marginLeft","marginRight","onClick","border","cursor","zoom","ref","attribution","index","direction","offset","permanent","textAlign","undefined","_c3","$RefreshReg$"],"sources":["C:/Users/CREATIVE_SOLUTIONS/Desktop/bolt/bolt codesandbox/src/App.js"],"sourcesContent":["import React, { useState, useRef, useEffect } from \"react\";\nimport {\n  MapContainer,\n  TileLayer,\n  Marker,\n  Tooltip,\n  useMap,\n} from \"react-leaflet\";\nimport \"leaflet/dist/leaflet.css\";\nimport Papa from \"papaparse\";\nimport L from \"leaflet\";\nimport \"leaflet-draw/dist/leaflet.draw.css\";\nimport \"leaflet-draw\";\nimport booleanPointInPolygon from \"@turf/boolean-point-in-polygon\";\nimport { point, polygon } from \"@turf/helpers\";\nimport * as XLSX from \"xlsx\";\n\n// Custom icons\nimport CustomMarkerIconImage from \"./custom-marker.png\";\nimport DotIconImage from \"./small-dot.png\";\n\nconst CustomMarkerIcon = L.icon({\n  iconUrl: CustomMarkerIconImage,\n  iconSize: [30, 40],\n  iconAnchor: [15, 40],\n  popupAnchor: [0, -40],\n});\n\nconst DotIcon = L.icon({\n  iconUrl: DotIconImage,\n  iconSize: [10, 10],\n  iconAnchor: [5, 5],\n});\n\nfunction ZipOverlay() {\n  const map = useMap();\n\n  useEffect(() => {\n    const url =\n      \"https://raw.githubusercontent.com/OpenDataDE/State-zip-code-GeoJSON/master/pa_pennsylvania_zip_codes_geo.min.json\";\n\n    fetch(url)\n      .then((res) => res.json())\n      .then((geoData) => {\n        const layer = L.geoJSON(geoData, {\n          style: {\n            color: \"#ff7800\",\n            weight: 1,\n            fillColor: \"#ffeda0\",\n            fillOpacity: 0.4,\n          },\n          onEachFeature: (feature, layerInstance) => {\n            const zip = feature.properties.ZCTA5CE10 || \"Unknown ZIP\";\n            layerInstance.bindPopup(`ZIP Code: ${zip}`);\n          },\n        });\n\n        layer.addTo(map);\n        // map.fitBounds(layer.getBounds()); // Optionally auto-zoom to polygons\n      })\n      .catch((err) => {\n        console.error(\"Error fetching ZIP code GeoJSON:\", err);\n      });\n  }, [map]);\n\n  return null;\n}\n\n\n\nfunction DrawHandler({\n  pricingData,\n  setFilteredPricingData,\n  locations,\n  setFilteredLocations,\n}) {\n  const map = useMap();\nconst[drawButton,setDrawButton]=useState(false);\n  // Helper function: is point inside the drawn shape?\n  const isPointInShape = (lat, lng, layer) => {\n    // Circle or circleMarker => distance check\n    if (layer instanceof L.Circle || layer instanceof L.CircleMarker) {\n      const center = layer.getLatLng(); // center latLng\n      const radius = layer.getRadius(); // circle radius in meters\n      // Use Leaflet's built-in distance method:\n      const distance = map.distance(center, L.latLng(lat, lng));\n      return distance <= radius;\n    } else {\n      // Polygon or rectangle => use Turf booleanPointInPolygon\n      const shapeGeoJSON = layer.toGeoJSON();\n      const polygonGeometry = polygon(shapeGeoJSON.geometry.coordinates);\n      const pt = point([lng, lat]);\n      return booleanPointInPolygon(pt, polygonGeometry);\n    }\n  };\n\n  // Whenever a shape is drawn, filter points that lie inside it.\n  const handleShapeDrawn = (layer) => {\n    // Filter pricing data\n    const filteredPricing = pricingData.filter((p) => {\n      const [lat, lng] = p.coords;\n      return isPointInShape(lat, lng, layer);\n    });\n\n    // Filter main CSV (comps) data\n    const filteredComps = locations.filter((loc) => {\n      const [lat, lng] = loc.coords;\n      return isPointInShape(lat, lng, layer);\n    });\n\n    // Combine them into one array if you want a single “filtered data” state:\n    const combinedData = [\n      ...filteredPricing.map((item) => ({\n        type: \"pricing\",\n        apn: item.apn,\n        lotAcreage: item.lotAcreage,\n        latitude: item.coords[0],\n        longitude: item.coords[1],\n      })),\n      ...filteredComps.map((item) => ({\n        type: \"comps\",\n        price: item.details.PRICE,\n        acres: item.details.ACRES,\n        latitude: item.coords[0],\n        longitude: item.coords[1],\n      })),\n    ];\n\n    setFilteredPricingData(combinedData);\n\n    // If you want to store filtered comps separately:\n    // setFilteredLocations(filteredComps);\n  };\n\n  useEffect(() => {\n    const drawnItems = new L.FeatureGroup();\n    map.addLayer(drawnItems);\n\n    // Add control once\n    const drawControl = new L.Control.Draw({\n      draw: {\n        marker: false,\n        polyline: false,\n        circle: {\n          shapeOptions: {\n            color: \"#ff0000\",\n          },\n          showRadius: true,\n        },\n        circlemarker: {\n          shapeOptions: {\n            color: \"#ff0000\",\n          },\n        },\n        polygon: {\n          shapeOptions: {\n            color: \"#0000ff\",\n          },\n          showArea: true,\n        },\n        rectangle: {\n          shapeOptions: {\n            color: \"#00ff00\",\n          },\n        },\n      },\n      edit: {\n        featureGroup: drawnItems,\n      },\n    });\n\n    map.addControl(drawControl);\n\n    // When a shape is created, handle it once.\n    map.on(\"draw:created\", (e) => {\n      const { layer } = e;\n      drawnItems.addLayer(layer);\n      handleShapeDrawn(layer);\n    });\n  }, [map, pricingData, locations]);\n\n  return null;\n}\n\nfunction App() {\n  const [locations, setLocations] = useState([]);          // Main CSV\n  const [pricingData, setPricingData] = useState([]);      // Pricing CSV (raw)\n  const [filteredPricingData, setFilteredPricingData] = useState([]); // Combined filtered\n  const [filteredLocations, setFilteredLocations] = useState([]);     // (Optional) filtered comps\n\n  // Acreage filter inputs\n  const [minAcreage, setMinAcreage] = useState(\"\");\n  const [maxAcreage, setMaxAcreage] = useState(\"\");\n\n  const mapRef = useRef(null);\n\n  // Upload main CSV\n  const handleMainCSVUpload = (event) => {\n    const file = event.target.files[0];\n    if (!file) return;\n\n    Papa.parse(file, {\n      header: true,\n      skipEmptyLines: true,\n      complete: function (results) {\n        const parsedData = results.data.map((row) => ({\n          coords: [parseFloat(row.LATITUDE), parseFloat(row.LONGITUDE)],\n          details: row,\n        }));\n        setLocations(parsedData);\n      },\n    });\n  };\n\n  // Upload pricing CSV\n  const handlePricingCSVUpload = (event) => {\n    const file = event.target.files[0];\n    if (!file) return;\n\n    Papa.parse(file, {\n      header: true,\n      skipEmptyLines: true,\n      complete: function (results) {\n        const parsedData = results.data\n          .filter(\n            (row) =>\n              row[\"LATITUDE\"] &&\n              row[\"LONGITUDE\"] &&\n              row[\"APN - FORMATTED\"]\n          )\n          .map((row) => ({\n            apn: row[\"APN - FORMATTED\"],\n            coords: [parseFloat(row.LATITUDE), parseFloat(row.LONGITUDE)],\n            lotAcreage: row[\"LOT ACREAGE\"]\n              ? parseFloat(row[\"LOT ACREAGE\"])\n              : null,\n          }));\n\n        setPricingData(parsedData);\n        setFilteredPricingData(parsedData); // By default, show all\n      },\n    });\n  };\n\n  // Apply acreage filter only to pricing data\n  const applyAcreageFilter = () => {\n    const minVal = parseFloat(minAcreage);\n    const maxVal = parseFloat(maxAcreage);\n\n    // If either is not a number, show all\n    if (isNaN(minVal) || isNaN(maxVal)) {\n      setFilteredPricingData(pricingData);\n      return;\n    }\n\n    // Filter by acreage in pricingData\n    const filtered = pricingData.filter((pd) => {\n      if (pd.lotAcreage == null) return false;\n      return pd.lotAcreage >= minVal && pd.lotAcreage <= maxVal;\n    });\n    setFilteredPricingData(filtered);\n  };\n\n  // Download & export to Excel\n  const downloadFilteredDataToExcel = () => {\n    if (filteredPricingData.length === 0) {\n      alert(\"No data points to download.\");\n      return;\n    }\n\n    const pricingDataTab = filteredPricingData\n      .filter((item) => item.type === \"pricing\")\n      .map((item) => ({\n        APN: item.apn,\n        \"LOT ACREAGE\": item.lotAcreage,\n        Latitude: item.latitude,\n        Longitude: item.longitude,\n      }));\n\n    const mainDataTab = filteredPricingData\n      .filter((item) => item.type === \"comps\")\n      .map((item) => ({\n        Price: item.price,\n        Acres: item.acres,\n        Latitude: item.latitude,\n        Longitude: item.longitude,\n      }));\n\n    const workbook = XLSX.utils.book_new();\n    const pricingSheet = XLSX.utils.json_to_sheet(pricingDataTab);\n    const mainSheet = XLSX.utils.json_to_sheet(mainDataTab);\n\n    XLSX.utils.book_append_sheet(workbook, pricingSheet, \"Pricing Data\");\n    XLSX.utils.book_append_sheet(workbook, mainSheet, \"Main Data\");\n\n    XLSX.writeFile(workbook, \"filtered_data.xlsx\");\n\n    // Example of removing downloaded points from map (optional):\n    const filteredCoords = new Set(\n      filteredPricingData.map((item) => [item.latitude, item.longitude].join(\",\"))\n    );\n\n    setLocations((prev) =>\n      prev.filter((loc) => !filteredCoords.has(loc.coords.join(\",\")))\n    );\n    setPricingData((prev) =>\n      prev.filter((pt) => !filteredCoords.has(pt.coords.join(\",\")))\n    );\n\n    // Clear the array so user sees no points after download\n    setFilteredPricingData([]);\n    alert(\"Filtered data downloaded and removed from the map.\");\n  };\n\n  return (\n    <div style={{ height: \"100vh\", width: \"100%\" }}>\n      {/* Control Panel */}\n      <div\n        style={{\n          position: \"absolute\",\n          zIndex: 1000,\n          top: 10,\n          right: 10,\n          background: \"white\",\n          padding: \"10px\",\n          borderRadius: \"5px\",\n          boxShadow: \"0 2px 5px rgba(0,0,0,0.2)\",\n        }}\n      >\n        <div>\n          <label>\n            Upload Main CSV:{\" \"}\n            <input\n              type=\"file\"\n              accept=\".csv\"\n              onChange={handleMainCSVUpload}\n              style={{ display: \"block\", marginBottom: \"10px\" }}\n            />\n          </label>\n        </div>\n        <div>\n          <label>\n            Upload Pricing CSV:{\" \"}\n            <input\n              type=\"file\"\n              accept=\".csv\"\n              onChange={handlePricingCSVUpload}\n              style={{ display: \"block\", marginBottom: \"10px\" }}\n            />\n          </label>\n        </div>\n        <div style={{ marginTop: \"10px\" }}>\n          <label>Min Acreage:</label>\n          <input\n            type=\"number\"\n            value={minAcreage}\n            onChange={(e) => setMinAcreage(e.target.value)}\n            style={{ width: \"80px\", marginLeft: \"5px\", marginRight: \"10px\" }}\n          />\n          <label>Max Acreage:</label>\n          <input\n            type=\"number\"\n            value={maxAcreage}\n            onChange={(e) => setMaxAcreage(e.target.value)}\n            style={{ width: \"80px\", marginLeft: \"5px\", marginRight: \"10px\" }}\n          />\n          <button onClick={applyAcreageFilter}>Apply Filter</button>\n        </div>\n\n        <button\n          onClick={downloadFilteredDataToExcel}\n          style={{\n            marginTop: \"10px\",\n            padding: \"5px 10px\",\n            background: \"#007bff\",\n            color: \"white\",\n            border: \"none\",\n            borderRadius: \"3px\",\n            cursor: \"pointer\",\n          }}\n        >\n          Download Filtered Data (Excel)\n        </button>\n      </div>\n\n      {/* The Map */}\n      <MapContainer\n        center={[41.2033, -77.1945]}\n        zoom={7}\n        style={{ height: \"100%\", width: \"100%\" }}\n        ref={mapRef}\n      >\n        <TileLayer\n          url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n          attribution=\"&copy; OpenStreetMap contributors\"\n        />\n\n        {/* ZIP code overlay */}\n        <ZipOverlay />\n\n        {/* Draw tools */}\n        <DrawHandler\n          pricingData={pricingData}\n          locations={locations}\n          setFilteredPricingData={setFilteredPricingData}\n          setFilteredLocations={setFilteredLocations}\n        />\n\n        {/* Markers from MAIN CSV */}\n        {locations.map((loc, index) => (\n          <Marker key={index} position={loc.coords} icon={CustomMarkerIcon}>\n            <Tooltip direction=\"top\" offset={[0, -10]} permanent>\n              <div style={{ textAlign: \"left\" }}>\n                <strong>PRICE:</strong> {loc.details.PRICE}\n                <br />\n                <strong>ACRES:</strong> {loc.details.ACRES}\n              </div>\n            </Tooltip>\n          </Marker>\n        ))}\n\n        {/* Markers from PRICING CSV (filtered by acreage or otherwise) */}\n        {filteredPricingData\n          .filter((item) => item.type === undefined || item.type === \"pricing\")\n          .map((point, index) => (\n            <Marker\n              key={index}\n              position={[point.latitude, point.longitude]}\n              icon={DotIcon}\n            ></Marker>\n          ))}\n      </MapContainer>\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}